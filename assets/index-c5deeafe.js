import{bb as u,d as q,m as g,S as A,p as B,o as F,a as T,A as e,w as a,Z as r,x as w,f as i,t as z,b7 as y,F as D,bc as E,a1 as N,a2 as O,U as j}from"./index-711bad6c.js";import{E as I}from"./el-dialog-e77400d2.js";import"./el-overlay-569e09b0.js";import{E as R,a as S,b as h}from"./el-message-0ef3f67b.js";import"./el-checkbox-fc98ec04.js";/* empty css                   */import{E as H}from"./el-button-31d35a19.js";import"./refs-3612419f.js";import"./vnode-27e25623.js";const Z=()=>u.get("/admin/acl/permission"),G=d=>d.id?u.put("/admin/acl/permission/update",d):u.post("/admin/acl/permission/save",d),J=d=>u.delete("/admin/acl/permission/remove/"+d),K={class:"dialog-footer"},se=q({__name:"index",setup(d){let c=g([]),t=g(!1),o=A({code:"",level:0,name:"",pid:0});B(()=>{f()});const f=async()=>{let s=await Z();s.code===200&&(c.value=s.data)},V=s=>{Object.assign(o,{id:0,code:"",level:0,name:"",pid:0}),t.value=!0,o.level=s.level+1,o.pid=s.id},C=s=>{t.value=!0,Object.assign(o,s)},x=async()=>{t.value=!1,(await G(o)).code===200&&(t.value=!1,E({type:"success",message:o.id?"更新成功":"添加成功"}),f())},k=async s=>{(await J(s)).code===200&&E({type:"success",message:"删除成功"})};return(s,n)=>{const p=R,m=H,P=S,M=h,_=N,b=O,U=j,$=I;return F(),T(D,null,[e(M,{style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"",data:i(c)},{default:a(()=>[e(p,{prop:"name",label:"名称"}),e(p,{prop:"code",label:"权限值"}),e(p,{prop:"updateTime",label:"修改时间","show-overflow-tooltip":""}),e(p,{label:"操作",width:"260px"},{default:a(({row:l,$index:L})=>[e(m,{size:"small",disabled:l.level===4,onClick:v=>V(l)},{default:a(()=>[r(w(l.level===3?"添加功能":"添加菜单"),1)]),_:2},1032,["disabled","onClick"]),e(m,{type:"primary",size:"small",disabled:l.level===1,onClick:v=>C(l)},{default:a(()=>[r(" 编辑 ")]),_:2},1032,["disabled","onClick"]),e(P,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:v=>k(l.id)},{reference:a(()=>[e(m,{type:"danger",size:"small",disabled:l.level===1},{default:a(()=>[r(" 删除 ")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e($,{modelValue:i(t),"onUpdate:modelValue":n[3]||(n[3]=l=>y(t)?t.value=l:t=l),title:i(o).id?"更新菜单":"添加菜单"},{footer:a(()=>[z("span",K,[e(m,{onClick:n[2]||(n[2]=l=>y(t)?t.value=!1:t=!1)},{default:a(()=>[r("取消")]),_:1}),e(m,{type:"primary",onClick:x},{default:a(()=>[r("确定")]),_:1})])]),default:a(()=>[e(U,null,{default:a(()=>[e(b,{label:"名称"},{default:a(()=>[e(_,{placeholder:"请你输入菜单的名称",modelValue:i(o).name,"onUpdate:modelValue":n[0]||(n[0]=l=>i(o).name=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"权限"},{default:a(()=>[e(_,{placeholder:"请你输入权限数值",modelValue:i(o).code,"onUpdate:modelValue":n[1]||(n[1]=l=>i(o).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{se as default};
